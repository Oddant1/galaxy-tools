<?xml version='1.0' encoding='utf-8'?>
<!--
Copyright (c) 2024, QIIME 2 development team.

Distributed under the terms of the Modified BSD License. (SPDX: BSD-3-Clause)
-->
<!--
This tool was automatically generated by:
    q2galaxy (version: 0+untagged.150.g81fc4fa)
for:
    qiime2 (version: 2023.11.0.dev0+16.gc95b12b)
-->
<tool name="qiime2 fragment-insertion filter-features" id="qiime2__fragment_insertion__filter_features" version="2023.11.0.dev0+1.g5dce83d-q2galaxy.0.untagged.150.g81fc4fa" profile="20.09" license="BSD-3-Clause">
    <description>Filter fragments in tree from table.</description>
    <requirements>
        <requirement type="package" version="0+untagged.150.g81fc4fa">q2galaxy</requirement>
        <requirement type="package" version="2023.11.0.dev0+1.g5dce83d">q2-fragment-insertion</requirement>
        <requirement type="package" version="2.1.14">biom-format</requirement>
        <requirement type="package" version="8.1.7">click</requirement>
        <requirement type="package" version="3.8.15">python</requirement>
        <requirement type="package" version="24.0">pip</requirement>
        <requirement type="package" version="69.0.3">setuptools</requirement>
        <requirement type="package" version="0.42.0">wheel</requirement>
        <requirement type="package" version="13.2.0">libgcc-ng</requirement>
        <requirement type="package" version="4.5">_openmp_mutex</requirement>
        <requirement type="package" version="0.1">_libgcc_mutex</requirement>
        <requirement type="package" version="13.2.0">libgomp</requirement>
        <requirement type="package" version="1.2.13">libzlib</requirement>
        <requirement type="package" version="1.0.8">bzip2</requirement>
        <requirement type="package" version="2.38.1">libuuid</requirement>
        <requirement type="package" version="5.2.6">xz</requirement>
        <requirement type="package" version="6.4">ncurses</requirement>
        <requirement type="package" version="1.1.1w">openssl</requirement>
        <requirement type="package" version="2024.2.2">ca-certificates</requirement>
        <requirement type="package" version="3.45.1">libsqlite</requirement>
        <requirement type="package" version="8.2">readline</requirement>
        <requirement type="package" version="8.6.13">tk</requirement>
        <requirement type="package" version="3.4.2">libffi</requirement>
        <requirement type="package" version="2.0.1">libnsl</requirement>
        <requirement type="package" version="2.40">ld_impl_linux-64</requirement>
        <requirement type="package" version="3.8">python_abi</requirement>
        <requirement type="package" version="1.10.0">scipy</requirement>
        <requirement type="package" version="13.2.0">libgfortran-ng</requirement>
        <requirement type="package" version="13.2.0">libgfortran5</requirement>
        <requirement type="package" version="1.8.0">pooch</requirement>
        <requirement type="package" version="23.2">packaging</requirement>
        <requirement type="package" version="2.31.0">requests</requirement>
        <requirement type="package" version="3.6">idna</requirement>
        <requirement type="package" version="2024.2.2">certifi</requirement>
        <requirement type="package" version="3.3.2">charset-normalizer</requirement>
        <requirement type="package" version="2.2.0">urllib3</requirement>
        <requirement type="package" version="1.1.0">brotli-python</requirement>
        <requirement type="package" version="13.2.0">libstdcxx-ng</requirement>
        <requirement type="package" version="1.7.1">pysocks</requirement>
        <requirement type="package" version="4.2.0">platformdirs</requirement>
        <requirement type="package" version="3.9.0">libblas</requirement>
        <requirement type="package" version="0.3.25">libopenblas</requirement>
        <requirement type="package" version="1.24.4">numpy</requirement>
        <requirement type="package" version="3.9.0">liblapack</requirement>
        <requirement type="package" version="3.9.0">libcblas</requirement>
        <requirement type="package" version="3.8.0">h5py</requirement>
        <requirement type="package" version="1.5.2">cached-property</requirement>
        <requirement type="package" version="1.5.2">cached_property</requirement>
        <requirement type="package" version="1.14.0">hdf5</requirement>
        <requirement type="package" version="1.1.2">libaec</requirement>
        <requirement type="package" version="7.87.0">libcurl</requirement>
        <requirement type="package" version="1.20.1">krb5</requirement>
        <requirement type="package" version="3.1.20191231">libedit</requirement>
        <requirement type="package" version="1.6.1">keyutils</requirement>
        <requirement type="package" version="1.10.0">libssh2</requirement>
        <requirement type="package" version="1.51.0">libnghttp2</requirement>
        <requirement type="package" version="1.26.0">c-ares</requirement>
        <requirement type="package" version="4.33">libev</requirement>
        <requirement type="package" version="1.5.3">pandas</requirement>
        <requirement type="package" version="2.8.2">python-dateutil</requirement>
        <requirement type="package" version="1.16.0">six</requirement>
        <requirement type="package" version="2024.1">pytz</requirement>
        <requirement type="package" version="4.5.2">dendropy</requirement>
        <requirement type="package" version="3.2.3">ijson</requirement>
        <requirement type="package" version="17.0.3">openjdk</requirement>
        <requirement type="package" version="1.8.4">xorg-libx11</requirement>
        <requirement type="package" version="7.0.31">xorg-xproto</requirement>
        <requirement type="package" version="1.0.7">xorg-kbproto</requirement>
        <requirement type="package" version="1.13">libxcb</requirement>
        <requirement type="package" version="1.0.11">xorg-libxau</requirement>
        <requirement type="package" version="1.1.3">xorg-libxdmcp</requirement>
        <requirement type="package" version="0.4">pthread-stubs</requirement>
        <requirement type="package" version="7.3.0">xorg-xextproto</requirement>
        <requirement type="package" version="1.3.4">xorg-libxext</requirement>
        <requirement type="package" version="1">fonts-conda-ecosystem</requirement>
        <requirement type="package" version="1">fonts-conda-forge</requirement>
        <requirement type="package" version="3.000">font-ttf-inconsolata</requirement>
        <requirement type="package" version="2.038">font-ttf-source-code-pro</requirement>
        <requirement type="package" version="0.83">font-ttf-ubuntu</requirement>
        <requirement type="package" version="2.37">font-ttf-dejavu-sans-mono</requirement>
        <requirement type="package" version="0.9.10">xorg-libxrender</requirement>
        <requirement type="package" version="0.11.1">xorg-renderproto</requirement>
        <requirement type="package" version="1.7.10">xorg-libxi</requirement>
        <requirement type="package" version="2.3.2">xorg-inputproto</requirement>
        <requirement type="package" version="5.0.3">xorg-libxfixes</requirement>
        <requirement type="package" version="5.0">xorg-fixesproto</requirement>
        <requirement type="package" version="1.2.3">xorg-libxtst</requirement>
        <requirement type="package" version="1.14.2">xorg-recordproto</requirement>
        <requirement type="package" version="1.6.42">libpng</requirement>
        <requirement type="package" version="2.12.1">freetype</requirement>
        <requirement type="package" version="9e">jpeg</requirement>
        <requirement type="package" version="5.2.1">giflib</requirement>
        <requirement type="package" version="1.2.8">alsa-lib</requirement>
        <requirement type="package" version="2.3.3">libcups</requirement>
        <requirement type="package" version="2.14.2">fontconfig</requirement>
        <requirement type="package" version="2.5.0">expat</requirement>
        <requirement type="package" version="2.5.0">libexpat</requirement>
        <requirement type="package" version="6.0.0">harfbuzz</requirement>
        <requirement type="package" version="1.3.13">graphite2</requirement>
        <requirement type="package" version="1.16.0">cairo</requirement>
        <requirement type="package" version="1.2.3">xorg-libsm</requirement>
        <requirement type="package" version="1.0.10">xorg-libice</requirement>
        <requirement type="package" version="70.1">icu</requirement>
        <requirement type="package" version="1.2.13">zlib</requirement>
        <requirement type="package" version="2.78.1">libglib</requirement>
        <requirement type="package" version="1.17">libiconv</requirement>
        <requirement type="package" version="10.40">pcre2</requirement>
        <requirement type="package" version="0.21.1">gettext</requirement>
        <requirement type="package" version="0.43.2">pixman</requirement>
        <requirement type="package" version="2.15">lcms2</requirement>
        <requirement type="package" version="4.5.0">libtiff</requirement>
        <requirement type="package" version="1.5.5">zstd</requirement>
        <requirement type="package" version="1.3.2">libwebp-base</requirement>
        <requirement type="package" version="4.0.0">lerc</requirement>
        <requirement type="package" version="1.17">libdeflate</requirement>
        <requirement type="package" version="2023.11.0.dev0+2.g1827eab">q2-types</requirement>
        <requirement type="package" version="2023.11.0.dev0+16.gc95b12b">qiime2</requirement>
        <requirement type="package" version="1.4.4">appdirs</requirement>
        <requirement type="package" version="1.4.1">bibtexparser</requirement>
        <requirement type="package" version="3.1.1">pyparsing</requirement>
        <requirement type="package" version="4.4.2">decorator</requirement>
        <requirement type="package" version="0.3.8">dill</requirement>
        <requirement type="package" version="7.1">flufl.lock</requirement>
        <requirement type="package" version="5.9.8">psutil</requirement>
        <requirement type="package" version="3.0.1">atpublic</requirement>
        <requirement type="package" version="4.9.2">lxml</requirement>
        <requirement type="package" version="2.10.3">libxml2</requirement>
        <requirement type="package" version="1.1.37">libxslt</requirement>
        <requirement type="package" version="3.1">networkx</requirement>
        <requirement type="package" version="2023.12.4">parsl</requirement>
        <requirement type="package" version="4.9.0">typing-extensions</requirement>
        <requirement type="package" version="4.9.0">typing_extensions</requirement>
        <requirement type="package" version="3.4.0">paramiko</requirement>
        <requirement type="package" version="39.0.0">cryptography</requirement>
        <requirement type="package" version="1.16.0">cffi</requirement>
        <requirement type="package" version="2.21">pycparser</requirement>
        <requirement type="package" version="4.1.2">bcrypt</requirement>
        <requirement type="package" version="1.5.0">pynacl</requirement>
        <requirement type="package" version="1.0.18">libsodium</requirement>
        <requirement type="package" version="3.35.0">globus-sdk</requirement>
        <requirement type="package" version="2.8.0">pyjwt</requirement>
        <requirement type="package" version="3.0.0">tblib</requirement>
        <requirement type="package" version="1.3.3">setproctitle</requirement>
        <requirement type="package" version="24.0.1">pyzmq</requirement>
        <requirement type="package" version="4.3.5">zeromq</requirement>
        <requirement type="package" version="2.13.3">typeguard</requirement>
        <requirement type="package" version="6.0.1">pyyaml</requirement>
        <requirement type="package" version="0.2.5">yaml</requirement>
        <requirement type="package" version="0.12.3">tomlkit</requirement>
        <requirement type="package" version="2.1">tzlocal</requirement>
        <requirement type="package" version="0.5.8">scikit-bio</requirement>
        <requirement type="package" version="8.0.0">pytest</requirement>
        <requirement type="package" version="0.4.6">colorama</requirement>
        <requirement type="package" version="2.0.0">iniconfig</requirement>
        <requirement type="package" version="1.2.0">exceptiongroup</requirement>
        <requirement type="package" version="2.0.1">tomli</requirement>
        <requirement type="package" version="1.4.0">pluggy</requirement>
        <requirement type="package" version="0.14.0">cachecontrol</requirement>
        <requirement type="package" version="1.0.7">msgpack-python</requirement>
        <requirement type="package" version="8.12.2">ipython</requirement>
        <requirement type="package" version="0.6.2">stack_data</requirement>
        <requirement type="package" version="2.4.1">asttokens</requirement>
        <requirement type="package" version="2.0.1">executing</requirement>
        <requirement type="package" version="0.2.2">pure_eval</requirement>
        <requirement type="package" version="0.1.6">matplotlib-inline</requirement>
        <requirement type="package" version="5.9.0">traitlets</requirement>
        <requirement type="package" version="0.7.5">pickleshare</requirement>
        <requirement type="package" version="0.2.0">backcall</requirement>
        <requirement type="package" version="2.17.2">pygments</requirement>
        <requirement type="package" version="0.19.1">jedi</requirement>
        <requirement type="package" version="0.8.3">parso</requirement>
        <requirement type="package" version="4.9.0">pexpect</requirement>
        <requirement type="package" version="0.7.0">ptyprocess</requirement>
        <requirement type="package" version="3.0.42">prompt_toolkit</requirement>
        <requirement type="package" version="3.0.42">prompt-toolkit</requirement>
        <requirement type="package" version="0.2.13">wcwidth</requirement>
        <requirement type="package" version="0.12.2">lockfile</requirement>
        <requirement type="package" version="8.4.0">natsort</requirement>
        <requirement type="package" version="3.6.0">matplotlib-base</requirement>
        <requirement type="package" version="0.12.1">cycler</requirement>
        <requirement type="package" version="9.4.0">pillow</requirement>
        <requirement type="package" version="2.5.0">openjpeg</requirement>
        <requirement type="package" version="1.4.5">kiwisolver</requirement>
        <requirement type="package" version="4.48.1">fonttools</requirement>
        <requirement type="package" version="1.1.0">brotli</requirement>
        <requirement type="package" version="1.1.0">libbrotlidec</requirement>
        <requirement type="package" version="1.1.0">libbrotlicommon</requirement>
        <requirement type="package" version="1.1.0">libbrotlienc</requirement>
        <requirement type="package" version="1.1.0">brotli-bin</requirement>
        <requirement type="package" version="1.1.4">munkres</requirement>
        <requirement type="package" version="15.1.0">unicodedata2</requirement>
        <requirement type="package" version="1.1.1">contourpy</requirement>
        <requirement type="package" version="0.14.2">hdmedians</requirement>
        <requirement type="package" version="3.0.8">cython</requirement>
        <requirement type="package" version="4.3.10">sepp</requirement>
        <requirement type="package" version="3.1b2">hmmer</requirement>
    </requirements>
    <version_command>q2galaxy version fragment_insertion</version_command>
    <command detect_errors="exit_code">q2galaxy run fragment_insertion filter_features '$inputs'</command>
    <configfiles>
        <inputs name="inputs" data_style="staging_path_and_source_path"/>
    </configfiles>
    <inputs>
        <param name="table" type="data" format="qza" label="table: FeatureTable[Frequency]" help="[required]  A feature-table which needs to filtered down to those fragments that are contained in the tree, e.g. result of a Deblur or DADA2 run.">
            <options options_filter_attribute="metadata.semantic_type">
                <filter type="add_value" value="FeatureTable[Frequency]"/>
            </options>
            <validator type="expression" message="Incompatible type">hasattr(value.metadata, "semantic_type") and value.metadata.semantic_type in ['FeatureTable[Frequency]']</validator>
        </param>
        <param name="tree" type="data" format="qza" label="tree: Phylogeny[Rooted]" help="[required]  The tree resulting from inserting fragments into a reference phylogeny, i.e. the output of function 'sepp'">
            <options options_filter_attribute="metadata.semantic_type">
                <filter type="add_value" value="Phylogeny[Rooted]"/>
            </options>
            <validator type="expression" message="Incompatible type">hasattr(value.metadata, "semantic_type") and value.metadata.semantic_type in ['Phylogeny[Rooted]']</validator>
        </param>
    </inputs>
    <outputs>
        <data name="filtered_table" format="qza" label="${tool.id} on ${on_string}: filtered_table.qza" from_work_dir="filtered_table.qza"/>
        <data name="removed_table" format="qza" label="${tool.id} on ${on_string}: removed_table.qza" from_work_dir="removed_table.qza"/>
    </outputs>
    <tests/>
    <help>
QIIME 2: fragment-insertion filter-features
===========================================
Filter fragments in tree from table.


Outputs:
--------
:filtered_table.qza: The input table minus those fragments that were not part of the tree. This feature-table can be used for downstream analyses like phylogenetic alpha- or beta- diversity computation.
:removed_table.qza: Those fragments that got removed from the input table, because they were not part of the tree. This table is mainly used for quality control, e.g. to inspect the ratio of removed reads per sample from the input table. You can ignore this table for downstream analyses.

|  

Description:
------------
Filters fragments not inserted into a phylogenetic tree from a feature-table. Some fragments computed by e.g. Deblur or DADA2 are too remote to get inserted by SEPP into a reference phylogeny. To be able to use the feature-table for downstream analyses like computing Faith's PD or UniFrac, the feature-table must be cleared of fragments that are not part of the phylogenetic tree, because their path length can otherwise not be determined. Typically, the number of rejected fragments is low (&lt;= 10), but it might be worth to inspect the ratio of reads assigned to those rejected fragments.


|  

</help>
    <citations>
        <citation type="doi">10.1128/mSystems.00021-18</citation>
        <citation type="doi">10.1371/journal.pone.0031009</citation>
        <citation type="doi">10.1371/journal.pcbi.1002195</citation>
        <citation type="bibtex">@article{cite4,
 author = {Matsen, Frederick A and Kodner, Robin B and Armbrust, E Virginia},
 journal = {BMC bioinformatics},
 number = {1},
 pages = {538},
 publisher = {BioMed Central},
 title = {pplacer: linear time maximum-likelihood and Bayesian phylogenetic placement of sequences onto a fixed reference tree},
 volume = {11},
 year = {2010}
}
</citation>
        <citation type="doi">10.1038/s41587-019-0209-9</citation>
    </citations>
</tool>
